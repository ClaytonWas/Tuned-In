<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="index.css" />
  </head>
  <body>
    <div class="container">
      <!-- Dynamic Island Header -->
      <header class="header" id="dynamicIsland">
        <div class="header-main">
          <div class="header-controls">
            <label class="checkbox-label">
              <input type="checkbox" id="fullTextMode" />
              <span>Full Text</span>
            </label>
            <div class="range-group">
              <span class="range-label">Chunk:</span>
              <input type="range" id="charLimit" min="1000" max="10000" value="7500" step="500" />
              <span id="charLimitValue" class="range-value">10000</span>
            </div>
          </div>
          <button id="settingsButton" class="header-settings-btn" title="Settings">
            <span>‚öôÔ∏è</span>
          </button>
        </div>
        
        <!-- Settings Panel (expands from Dynamic Island) -->
        <div id="settingsPanel" class="settings-panel" hidden>
          <div class="settings-content">
            <!-- Theme Mode Toggle -->
            <div class="setting-item">
              <label class="setting-label" for="themeToggle">Theme</label>
              <button id="themeToggle" class="setting-btn">üåû Light / üåö Dark</button>
            </div>

            <!-- History Limit -->
            <div class="setting-item">
              <label class="setting-label">History Limit</label>
              <input type="number" id="historyLimit" class="setting-control" min="1" max="100" value="20" />
            </div>

            <!-- Popularity Range -->
            <div class="setting-item">
              <label class="setting-label">Popularity Range</label>
              <div class="range-slider-container">
                <div class="range-slider">
                  <input type="range" id="popularityMin" min="0" max="100" value="25" class="range-input range-min" />
                  <input type="range" id="popularityMax" min="0" max="100" value="100" class="range-input range-max" />
                  <div class="range-track"></div>
                  <div class="range-fill"></div>
                </div>
                <div class="range-values">
                  <span id="popularityMinValue">25</span>
                  <span class="range-separator">‚Äì</span>
                  <span id="popularityMaxValue">100</span>
                </div>
              </div>
            </div>

            <!-- Export/Clear History -->
            <div class="setting-item">
              <label class="setting-label">History</label>
              <div class="setting-buttons">
                <button id="exportHistory" class="setting-btn">Export</button>
                <button id="clearHistory" class="setting-btn setting-btn-danger">Clear</button>
              </div>
            </div>

            <!-- Show Scrollbar Toggle -->
            <div class="setting-item">
              <label class="checkbox-label">
                <input type="checkbox" id="showScrollbar" />
                <span>Show Scrollbar</span>
              </label>
            </div>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main">
        <!-- Now Playing Section -->
        <section class="now-playing-section">
          <!-- Generate Button -->
          <button id="summarizeButton" class="generate-btn">
            <span class="generate-btn-icon">‚ú¶</span>
            <span class="generate-btn-text">Generate Recommendation</span>
          </button>

          <!-- Warning (compact) -->
          <div id="warning" hidden class="warning-banner"></div>

          <!-- Now Playing Card -->
          <div id="musicInfo" hidden class="now-playing-card">
            <div id="trackInfo" class="now-playing-content">
              <div class="now-playing-artwork">
                <a id="albumCoverLink" href="#" target="_blank" title="Open in Spotify">
                  <img id="albumCover" src="" alt="Album cover" class="album-art" />
                </a>
              </div>
              <div class="now-playing-details">
                <a id="spotifyLink" href="#" target="_blank" class="now-playing-link">
                  <div class="now-playing-track">
                    <h3 id="trackName" class="track-name">‚Äî</h3>
                  </div>
                  <div class="now-playing-artist">
                    <p id="trackArtist" class="track-artist">‚Äî</p>
                  </div>
                </a>
                <div class="now-playing-meta">
                  <span class="meta-tag" id="musicGenres">-</span>
                  <span class="meta-divider">‚Ä¢</span>
                  <span class="meta-tag"><span id="musicBpm">-</span> BPM</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- History -->
        <div class="history-section">
          <div class="section-header">
            <h2 class="section-title">History</h2>
            <span id="historyCount" class="badge">0</span>
          </div>
          <ul id="historyList" class="history-list"></ul>
        </div>
      </main>
    </div>

    <script src="processCards.js"></script>
    <script src="index.js"></script>
  </body>
</html>
